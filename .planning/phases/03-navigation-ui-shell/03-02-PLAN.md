---
phase: 03-navigation-ui-shell
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/App.tsx
  - src/pages/DashboardPage.tsx
  - src/pages/BankMovementsPage.tsx
  - src/pages/InvoicesPage.tsx
  - src/pages/CreditCardPage.tsx
  - src/pages/SettingsPage.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar displays all 5 pages: Dashboard, Bank Movements, Invoices & Receipts, Credit Card, Settings"
    - "Clicking nav item navigates without page reload"
    - "Active page highlighted in sidebar"
    - "Each page renders with consistent layout"
  artifacts:
    - path: "src/pages/BankMovementsPage.tsx"
      provides: "Placeholder page for bank movements"
      exports: ["BankMovementsPage"]
    - path: "src/pages/InvoicesPage.tsx"
      provides: "Placeholder page for invoices & receipts"
      exports: ["InvoicesPage"]
    - path: "src/pages/CreditCardPage.tsx"
      provides: "Placeholder page for credit card"
      exports: ["CreditCardPage"]
    - path: "src/pages/SettingsPage.tsx"
      provides: "Placeholder page for settings"
      exports: ["SettingsPage"]
  key_links:
    - from: "src/App.tsx"
      to: "src/components/layout/AppShell.tsx"
      via: "Route element wrapper"
      pattern: "<Route element=\\{<AppShell"
    - from: "src/App.tsx"
      to: "src/pages/*Page.tsx"
      via: "Route elements"
      pattern: "<Route.*element=\\{<.*Page"
---

<objective>
Create placeholder pages and integrate routing with AppShell layout.

Purpose: Complete the navigation structure so all pages are accessible via sidebar
Output: 5 navigable pages wrapped in AppShell with functional navigation
</objective>

<execution_context>
@/Users/yedidya/.claude/get-shit-done/workflows/execute-plan.md
@/Users/yedidya/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-navigation-ui-shell/03-RESEARCH.md
@.planning/phases/03-navigation-ui-shell/03-01-SUMMARY.md

# Existing code
@src/App.tsx
@src/pages/DashboardPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create placeholder pages</name>
  <files>
    - src/pages/BankMovementsPage.tsx
    - src/pages/InvoicesPage.tsx
    - src/pages/CreditCardPage.tsx
    - src/pages/SettingsPage.tsx
  </files>
  <action>
    Create 4 new placeholder pages following consistent structure:

    Each page should have:
    - Named export (e.g., export function BankMovementsPage())
    - Wrapper div with p-6 padding
    - h1 with text-2xl font-bold text-text mb-4
    - Content card with bg-surface rounded-lg p-6
    - Placeholder text describing what will be built

    Page specifics:

    1. BankMovementsPage.tsx:
       - Title: "Bank Movements"
       - Placeholder: "Upload and view bank transaction data. Import xlsx/csv files to track income and expenses."

    2. InvoicesPage.tsx:
       - Title: "Invoices & Receipts"
       - Placeholder: "Upload invoices and receipts for AI extraction. View and manage all documents."

    3. CreditCardPage.tsx:
       - Title: "Credit Card"
       - Placeholder: "Import credit card statements and view linked transactions."

    4. SettingsPage.tsx:
       - Title: "Settings"
       - Placeholder: "Configure matching preferences, auto-approval thresholds, and application settings."

    Do NOT add any functionality beyond placeholder content.
  </action>
  <verify>
    - Each file exports a named React component
    - No TypeScript errors
    - Consistent styling across all pages
  </verify>
  <done>4 placeholder pages created with consistent structure and styling</done>
</task>

<task type="auto">
  <name>Task 2: Update routing and DashboardPage</name>
  <files>
    - src/App.tsx
    - src/pages/DashboardPage.tsx
  </files>
  <action>
    1. Update src/App.tsx:
       - Import AppShell from @/components/layout/AppShell
       - Import all page components (BankMovementsPage, InvoicesPage, CreditCardPage, SettingsPage)
       - Update protected routes structure:
         - ProtectedRoute wraps AppShell
         - AppShell wraps all page routes
         - Routes: index -> DashboardPage, bank-movements, invoices, credit-card, settings
       - Remove duplicate "/" route (keep only index)
       - Structure:
         ```
         <Route element={<ProtectedRoute />}>
           <Route element={<AppShell />}>
             <Route index element={<DashboardPage />} />
             <Route path="bank-movements" element={<BankMovementsPage />} />
             <Route path="invoices" element={<InvoicesPage />} />
             <Route path="credit-card" element={<CreditCardPage />} />
             <Route path="settings" element={<SettingsPage />} />
           </Route>
         </Route>
         ```

    2. Update src/pages/DashboardPage.tsx:
       - Remove the header with "VAT Declaration Manager" title (now in Sidebar)
       - Remove the sign out button (will be added to sidebar/header later)
       - Keep the Supabase connection status indicator
       - Keep the welcome message
       - Simplify to match other page structure (p-6 wrapper, card content)
       - Add user email display in the dashboard content
       - Keep useAuth hook for user info
  </action>
  <verify>
    - npm run build completes without errors
    - npm run dev starts application
    - Navigate to each route manually (/bank-movements, /invoices, etc.)
  </verify>
  <done>All routes configured, DashboardPage simplified to work within AppShell</done>
</task>

<task type="auto">
  <name>Task 3: Add logout to sidebar and verify navigation</name>
  <files>
    - src/components/layout/Sidebar.tsx
  </files>
  <action>
    Update Sidebar.tsx to add logout functionality at bottom:

    1. Import useAuth from @/contexts/AuthContext
    2. Import ArrowRightStartOnRectangleIcon from @heroicons/react/24/outline
    3. Add logout button at bottom of sidebar (after nav, before closing aside):
       - Use same styling as nav items but with red/error color on hover
       - Position at bottom using mt-auto on a wrapper or flex layout
       - Show "Sign out" text when expanded, just icon when collapsed
       - Add loading state (use local useState for loggingOut)
       - On click: set loggingOut true, call signOut(), navigation handled by AuthContext

    4. Add user email display above logout (optional, only when expanded):
       - Show truncated email with text-text-muted text-sm
       - Wrap in div with border-t border-text-muted/20 for separation
  </action>
  <verify>
    - npm run dev and login
    - Click each nav item - page changes without reload
    - Active nav item shows green highlight
    - Collapse sidebar - icons only visible
    - Expand sidebar - labels return
    - Click Sign out - redirects to login page
    - Refresh page - sidebar state persists
  </verify>
  <done>Logout integrated in sidebar, all navigation working with proper active states</done>
</task>

</tasks>

<verification>
After completing all tasks, run full verification:

1. Build check: `npm run build` - no errors
2. Start app: `npm run dev`
3. Navigate to http://localhost:5173
4. Login with valid credentials
5. Verify sidebar shows all 5 pages with correct icons
6. Click each nav item:
   - Dashboard (/) - shows connection status
   - Bank Movements (/bank-movements) - placeholder
   - Invoices & Receipts (/invoices) - placeholder
   - Credit Card (/credit-card) - placeholder
   - Settings (/settings) - placeholder
7. Verify active state (green highlight) updates correctly
8. Collapse sidebar - verify icons only, labels hidden
9. Expand sidebar - verify labels return
10. Refresh page - verify sidebar state persists
11. Click Sign out - verify redirect to login
</verification>

<success_criteria>
- All 5 pages accessible via sidebar navigation
- Navigation works without page reload (SPA behavior)
- Active page clearly indicated with green highlight
- Sidebar collapse state persists across refresh
- Sign out works from sidebar
- Dark theme consistent across all pages
- No TypeScript or build errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-navigation-ui-shell/03-02-SUMMARY.md`
</output>
